--------------------------------------------------------
--  File created - czwartek-maja-30-2019   
--------------------------------------------------------
DROP TABLE "MKAPUSCI"."ANSWERS" cascade constraints;
DROP TABLE "MKAPUSCI"."QUESTION" cascade constraints;
DROP TABLE "MKAPUSCI"."RESULTS" cascade constraints;
DROP TABLE "MKAPUSCI"."RESULTS_ANSWERS" cascade constraints;
DROP TABLE "MKAPUSCI"."TEST" cascade constraints;
DROP TABLE "MKAPUSCI"."TEST_QUESTIONS" cascade constraints;
DROP TABLE "MKAPUSCI"."USERS" cascade constraints;
DROP TABLE "MKAPUSCI"."USERS_TESTS" cascade constraints;
DROP FUNCTION "MKAPUSCI"."ISTESTCOMPLETE";
--------------------------------------------------------
--  DDL for Sequence ANSWERS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "MKAPUSCI"."ANSWERS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 46 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence QUESTION_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "MKAPUSCI"."QUESTION_SEQ"  MINVALUE 0 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 42 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence RESULTS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "MKAPUSCI"."RESULTS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TEST_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "MKAPUSCI"."TEST_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 42 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table ANSWERS
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."ANSWERS" 
   (	"ANSWER_ID" NUMBER, 
	"TEXT" VARCHAR2(50 CHAR), 
	"QUESTION_ID" NUMBER, 
	"CORRECT" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table QUESTION
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."QUESTION" 
   (	"QUESTION_ID" NUMBER, 
	"TEXT" VARCHAR2(150 BYTE), 
	"TYPE" NUMBER(1,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table RESULTS
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."RESULTS" 
   (	"RESULTS_ID" NUMBER, 
	"TEST_ID" NUMBER, 
	"USER_ID" NUMBER, 
	"SENT_DATE" TIMESTAMP (0) WITH LOCAL TIME ZONE, 
	"POINTS" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table RESULTS_ANSWERS
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."RESULTS_ANSWERS" 
   (	"ANSWER_ID" NUMBER, 
	"RESULTS_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table TEST
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."TEST" 
   (	"TEST_ID" NUMBER, 
	"TITLE" VARCHAR2(100 BYTE), 
	"START_DATE" TIMESTAMP (0) WITH LOCAL TIME ZONE, 
	"FINISH_DATE" TIMESTAMP (0) WITH LOCAL TIME ZONE, 
	"TYPE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table TEST_QUESTIONS
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."TEST_QUESTIONS" 
   (	"QUESTION_ID" NUMBER, 
	"TEST_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."USERS" 
   (	"USER_ID" NUMBER, 
	"LOGIN" VARCHAR2(20 BYTE), 
	"PASSWORD" VARCHAR2(30 BYTE), 
	"FIRST_NAME" VARCHAR2(20 BYTE), 
	"LAST_NAME" VARCHAR2(20 BYTE), 
	"ADMIN" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Table USERS_TESTS
--------------------------------------------------------

  CREATE TABLE "MKAPUSCI"."USERS_TESTS" 
   (	"USER_ID" NUMBER, 
	"TEST_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 COMPRESS FOR OLTP LOGGING
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
REM INSERTING into MKAPUSCI.ANSWERS
SET DEFINE OFF;
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('0','Wylacza oscyloskop','0','0');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('1','Nie istnieje','0','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('2','Twoja stara','0','0');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('3','W kieszeni','1','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('4','W rejestrze','1','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('5','¯adne z powy¿szych','1','0');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('6','tak','5','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('7','nie','5','0');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('26','tak','22','0');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('27','no chyba nie','22','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('28','tak','23','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('29','I to jeszcze jak','23','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('30','znudzilo mi sie','23','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('31','tak','24','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('32','I to jeszcze jak','24','1');
Insert into MKAPUSCI.ANSWERS (ANSWER_ID,TEXT,QUESTION_ID,CORRECT) values ('33','znudzilo mi sie','24','1');
REM INSERTING into MKAPUSCI.QUESTION
SET DEFINE OFF;
Insert into MKAPUSCI.QUESTION (QUESTION_ID,TEXT,TYPE) values ('0','Co robi maly czerwony przycisk z tylu oscyloskopu','0');
Insert into MKAPUSCI.QUESTION (QUESTION_ID,TEXT,TYPE) values ('1','Gdzie dr. Turlej trzyma ziemniaki?','1');
Insert into MKAPUSCI.QUESTION (QUESTION_ID,TEXT,TYPE) values ('24','Duplikat pytania','1');
Insert into MKAPUSCI.QUESTION (QUESTION_ID,TEXT,TYPE) values ('5','Czy dodawanie pytañ to dzia³a?','0');
Insert into MKAPUSCI.QUESTION (QUESTION_ID,TEXT,TYPE) values ('22','pytanie: czy chce mi sie to robic','0');
Insert into MKAPUSCI.QUESTION (QUESTION_ID,TEXT,TYPE) values ('23','Usuwanie calego projektu. Jestes pewien?','1');
REM INSERTING into MKAPUSCI.RESULTS
SET DEFINE OFF;
Insert into MKAPUSCI.RESULTS (RESULTS_ID,TEST_ID,USER_ID,SENT_DATE,POINTS) values ('22','27','1',to_timestamp('19/05/30 10:28:47,000000000','RR/MM/DD HH24:MI:SSXFF'),'4');
Insert into MKAPUSCI.RESULTS (RESULTS_ID,TEST_ID,USER_ID,SENT_DATE,POINTS) values ('13','1','1',to_timestamp('19/05/23 20:38:19,000000000','RR/MM/DD HH24:MI:SSXFF'),'1');
Insert into MKAPUSCI.RESULTS (RESULTS_ID,TEST_ID,USER_ID,SENT_DATE,POINTS) values ('21','29','1',to_timestamp('19/05/30 00:21:26,000000000','RR/MM/DD HH24:MI:SSXFF'),'2');
REM INSERTING into MKAPUSCI.RESULTS_ANSWERS
SET DEFINE OFF;
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('0','21');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('1','13');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('1','22');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('3','22');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('4','13');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('4','21');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('4','22');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('5','13');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('5','21');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('6','21');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('6','22');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('27','21');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('27','22');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('28','22');
Insert into MKAPUSCI.RESULTS_ANSWERS (ANSWER_ID,RESULTS_ID) values ('30','21');
REM INSERTING into MKAPUSCI.TEST
SET DEFINE OFF;
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('27','TEST Z USERAMI',to_timestamp('19/05/30 00:12:07,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/30 15:12:13,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('1','Test pierwszy',to_timestamp('19/04/17 08:00:00,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/23 20:45:00,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('2','Test drugi',to_timestamp('19/05/11 08:00:00,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/23 00:00:00,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('25','test',to_timestamp('19/05/29 23:34:50,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/29 23:50:57,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('26','krotkanazwa',to_timestamp('19/05/29 23:57:58,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/31 23:57:02,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('22','Test dodany',to_timestamp('19/04/17 08:00:00,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/23 20:45:00,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('23','Test dodany numer 2',to_timestamp('19/04/17 08:00:00,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/23 20:45:00,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('28','Test testowy',to_timestamp('19/05/30 00:18:57,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/30 00:25:04,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
Insert into MKAPUSCI.TEST (TEST_ID,TITLE,START_DATE,FINISH_DATE,TYPE) values ('29','Kolejny test',to_timestamp('19/05/30 00:20:24,000000000','RR/MM/DD HH24:MI:SSXFF'),to_timestamp('19/05/30 00:25:30,000000000','RR/MM/DD HH24:MI:SSXFF'),'0');
REM INSERTING into MKAPUSCI.TEST_QUESTIONS
SET DEFINE OFF;
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','1');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','1');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','22');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','22');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','23');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','23');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','26');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','26');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('5','26');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('23','26');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('24','26');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','27');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','27');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('5','27');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('22','27');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('23','27');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','28');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','28');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('5','28');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('22','28');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('23','28');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('0','29');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('1','29');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('5','29');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('22','29');
Insert into MKAPUSCI.TEST_QUESTIONS (QUESTION_ID,TEST_ID) values ('23','29');
REM INSERTING into MKAPUSCI.USERS
SET DEFINE OFF;
Insert into MKAPUSCI.USERS (USER_ID,LOGIN,PASSWORD,FIRST_NAME,LAST_NAME,ADMIN) values ('0','admin','admin','Administrator','Systemu','y');
Insert into MKAPUSCI.USERS (USER_ID,LOGIN,PASSWORD,FIRST_NAME,LAST_NAME,ADMIN) values ('1','user','user','U¿ytkownik','Testowy','n');
REM INSERTING into MKAPUSCI.USERS_TESTS
SET DEFINE OFF;
Insert into MKAPUSCI.USERS_TESTS (USER_ID,TEST_ID) values ('1','1');
Insert into MKAPUSCI.USERS_TESTS (USER_ID,TEST_ID) values ('1','2');
Insert into MKAPUSCI.USERS_TESTS (USER_ID,TEST_ID) values ('1','27');
Insert into MKAPUSCI.USERS_TESTS (USER_ID,TEST_ID) values ('1','28');
Insert into MKAPUSCI.USERS_TESTS (USER_ID,TEST_ID) values ('1','29');
--------------------------------------------------------
--  DDL for Index ANSWERS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."ANSWERS_PK" ON "MKAPUSCI"."ANSWERS" ("ANSWER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index QUESTION_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."QUESTION_PK" ON "MKAPUSCI"."QUESTION" ("QUESTION_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index RESULTS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."RESULTS_PK" ON "MKAPUSCI"."RESULTS" ("RESULTS_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index RELATION_2_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."RELATION_2_PK" ON "MKAPUSCI"."RESULTS_ANSWERS" ("ANSWER_ID", "RESULTS_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index TEST_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."TEST_PK" ON "MKAPUSCI"."TEST" ("TEST_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index RELATION_3_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."RELATION_3_PK" ON "MKAPUSCI"."TEST_QUESTIONS" ("QUESTION_ID", "TEST_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index IDX_TEST_QUESTIONS
--------------------------------------------------------

  CREATE BITMAP INDEX "MKAPUSCI"."IDX_TEST_QUESTIONS" ON "MKAPUSCI"."TEST_QUESTIONS" ("TEST_ID", "QUESTION_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index USER_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."USER_PK" ON "MKAPUSCI"."USERS" ("USER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index user_UK1
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."user_UK1" ON "MKAPUSCI"."USERS" ("LOGIN") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Index RELATION_6_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "MKAPUSCI"."RELATION_6_PK" ON "MKAPUSCI"."USERS_TESTS" ("USER_ID", "TEST_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA" ;
--------------------------------------------------------
--  DDL for Trigger ANSWERS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "MKAPUSCI"."ANSWERS_TRG" 
BEFORE INSERT ON ANSWERS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ANSWER_ID IS NULL THEN
      SELECT ANSWERS_SEQ.NEXTVAL INTO :NEW.ANSWER_ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "MKAPUSCI"."ANSWERS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger QUESTION_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "MKAPUSCI"."QUESTION_TRG" 
BEFORE INSERT ON QUESTION 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.QUESTION_ID IS NULL THEN
      SELECT QUESTION_SEQ.NEXTVAL INTO :NEW.QUESTION_ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "MKAPUSCI"."QUESTION_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger RESULTS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "MKAPUSCI"."RESULTS_TRG" 
BEFORE INSERT ON RESULTS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.RESULTS_ID IS NULL THEN
      SELECT RESULTS_SEQ.NEXTVAL INTO :NEW.RESULTS_ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "MKAPUSCI"."RESULTS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TEST_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "MKAPUSCI"."TEST_TRG" 
BEFORE INSERT ON TEST 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.TEST_ID IS NULL THEN
      SELECT TEST_SEQ.NEXTVAL INTO :NEW.TEST_ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "MKAPUSCI"."TEST_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Function ISTESTCOMPLETE
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "MKAPUSCI"."ISTESTCOMPLETE" (
uID in number,
tID in number
)
return number
as
isDone number;
Begin
isDone := 0;
for i in (select * from results
            where user_id = uID
            and test_id = tID)
loop
    isDone := 1;
End loop;
return isDone;
End isTestComplete;

/
--------------------------------------------------------
--  Constraints for Table ANSWERS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."ANSWERS" ADD CONSTRAINT "ANSWERS_PK" PRIMARY KEY ("ANSWER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."ANSWERS" MODIFY ("ANSWER_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."ANSWERS" MODIFY ("QUESTION_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."ANSWERS" MODIFY ("CORRECT" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table QUESTION
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."QUESTION" ADD CONSTRAINT "QUESTION_PK" PRIMARY KEY ("QUESTION_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."QUESTION" MODIFY ("QUESTION_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table RESULTS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."RESULTS" ADD CONSTRAINT "RESULTS_PK" PRIMARY KEY ("RESULTS_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."RESULTS" MODIFY ("RESULTS_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."RESULTS" MODIFY ("TEST_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."RESULTS" MODIFY ("USER_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."RESULTS" MODIFY ("SENT_DATE" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table RESULTS_ANSWERS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."RESULTS_ANSWERS" ADD CONSTRAINT "RELATION_2_PK" PRIMARY KEY ("ANSWER_ID", "RESULTS_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."RESULTS_ANSWERS" MODIFY ("ANSWER_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."RESULTS_ANSWERS" MODIFY ("RESULTS_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TEST
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."TEST" MODIFY ("TEST_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."TEST" MODIFY ("START_DATE" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."TEST" MODIFY ("FINISH_DATE" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."TEST" MODIFY ("TYPE" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."TEST" ADD CONSTRAINT "TEST_PK" PRIMARY KEY ("TEST_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TEST_QUESTIONS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."TEST_QUESTIONS" ADD CONSTRAINT "RELATION_3_PK" PRIMARY KEY ("QUESTION_ID", "TEST_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."TEST_QUESTIONS" MODIFY ("QUESTION_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."TEST_QUESTIONS" MODIFY ("TEST_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table USERS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."USERS" MODIFY ("USER_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."USERS" MODIFY ("LOGIN" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."USERS" MODIFY ("PASSWORD" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."USERS" MODIFY ("ADMIN" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."USERS" ADD CONSTRAINT "USER_PK" PRIMARY KEY ("USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."USERS" ADD CONSTRAINT "user_UK1" UNIQUE ("LOGIN")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
--------------------------------------------------------
--  Constraints for Table USERS_TESTS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."USERS_TESTS" ADD CONSTRAINT "RELATION_6_PK" PRIMARY KEY ("USER_ID", "TEST_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 8192 NEXT 8192 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "II_DATA"  ENABLE;
 
  ALTER TABLE "MKAPUSCI"."USERS_TESTS" MODIFY ("USER_ID" NOT NULL ENABLE);
 
  ALTER TABLE "MKAPUSCI"."USERS_TESTS" MODIFY ("TEST_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table ANSWERS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."ANSWERS" ADD CONSTRAINT "ANSWERS_QUESTION_FK" FOREIGN KEY ("QUESTION_ID")
	  REFERENCES "MKAPUSCI"."QUESTION" ("QUESTION_ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table RESULTS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."RESULTS" ADD CONSTRAINT "RESULTS_TEST_FK" FOREIGN KEY ("TEST_ID")
	  REFERENCES "MKAPUSCI"."TEST" ("TEST_ID") ENABLE;
 
  ALTER TABLE "MKAPUSCI"."RESULTS" ADD CONSTRAINT "RESULTS_USER_FK" FOREIGN KEY ("USER_ID")
	  REFERENCES "MKAPUSCI"."USERS" ("USER_ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table RESULTS_ANSWERS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."RESULTS_ANSWERS" ADD CONSTRAINT "ANSWERS_FK" FOREIGN KEY ("ANSWER_ID")
	  REFERENCES "MKAPUSCI"."ANSWERS" ("ANSWER_ID") ON DELETE CASCADE ENABLE;
 
  ALTER TABLE "MKAPUSCI"."RESULTS_ANSWERS" ADD CONSTRAINT "RESULTS_FK" FOREIGN KEY ("RESULTS_ID")
	  REFERENCES "MKAPUSCI"."RESULTS" ("RESULTS_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table TEST_QUESTIONS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."TEST_QUESTIONS" ADD CONSTRAINT "QUESTION_FK" FOREIGN KEY ("QUESTION_ID")
	  REFERENCES "MKAPUSCI"."QUESTION" ("QUESTION_ID") ENABLE;
 
  ALTER TABLE "MKAPUSCI"."TEST_QUESTIONS" ADD CONSTRAINT "TEST_FK" FOREIGN KEY ("TEST_ID")
	  REFERENCES "MKAPUSCI"."TEST" ("TEST_ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table USERS_TESTS
--------------------------------------------------------

  ALTER TABLE "MKAPUSCI"."USERS_TESTS" ADD CONSTRAINT "RELATION_6_TEST_FK" FOREIGN KEY ("TEST_ID")
	  REFERENCES "MKAPUSCI"."TEST" ("TEST_ID") ENABLE;
 
  ALTER TABLE "MKAPUSCI"."USERS_TESTS" ADD CONSTRAINT "RELATION_6_USER_FK" FOREIGN KEY ("USER_ID")
	  REFERENCES "MKAPUSCI"."USERS" ("USER_ID") ENABLE;
